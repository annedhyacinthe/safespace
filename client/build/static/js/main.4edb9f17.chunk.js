(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{291:function(e,t,a){e.exports=a(465)},451:function(e,t){},465:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(34),l=a.n(c),o=(a(296),a(297),a(9)),s=Object(n.createContext)({}),i=function(e){var t=e.children,a=Object(n.useState)(null),c=Object(o.a)(a,2),l=c[0],i=c[1];return Object(n.useEffect)((function(){document.cookie?fetch("/user").then((function(e){return 200===e.status?e.json():null})).then((function(e){return i(e)})):i(null)}),[i]),r.a.createElement(s.Provider,{value:{user:l,setUser:i}},t)},u=a(35),m=a(28),p=a(10),d=a.n(p),f=a(13),E=a(160),b=a(257),h=a(69),y=a(136),v=a(94),j=a(496),g="#85D7FF",x="#1FB6FF",O="#009EEB",w=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),i=Object(o.a)(l,2),u=i[0],p=i[1],x=Object(n.useState)(!1),w=Object(o.a)(x,2),k=w[0],C=w[1],S=Object(n.useContext)(s),T=S.user,A=S.setUser,L=Object(n.useState)(null),N=Object(o.a)(L,2),I=N[0],P=N[1],B=function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={username:t,password:a},fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){if(200===e.status)return e.json();throw F("Invalid Username/Password"),Error("Invalid Username/Password")})).then((function(e){return A(e)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function F(e){P(e),window.setTimeout((function(){P(null)}),5e3)}return r.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:"10px"}},r.a.createElement(E.a,{style:{width:"25rem",border:"0px"}},r.a.createElement(E.a.Body,null,r.a.createElement(E.a.Title,{style:{textAlign:"center"}},r.a.createElement("h1",null,"S A F E S P A C E")),r.a.createElement(E.a.Title,{style:{textAlign:"center",color:O}},"Log In"),r.a.createElement(E.a.Subtitle,{style:{textAlign:"center",color:g},className:"mb-2"},"Welcome Back!"),r.a.createElement(b.a,{style:{marginTop:"25px"},className:"justify-content-md-center",fluid:"lg"},r.a.createElement(h.a,null,I&&r.a.createElement(y.a,{variant:"warning"},I),r.a.createElement("div",null,r.a.createElement(h.a.Group,null,r.a.createElement(j.a,{style:{width:"100%"},type:"text",label:"Username",value:a,onChange:function(e){return c(e.target.value)},onClean:function(e){return c(e)}}))),r.a.createElement("div",null,r.a.createElement(h.a.Group,{controlId:"formBasicPassword"},r.a.createElement(j.a,{style:{width:"100%"},type:"password",label:"Password",value:u,onChange:function(e){return p(e.target.value)},onClean:function(e){return p(e)}}))),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(v.a,{onClick:function(e){e.preventDefault(),B(a,u),C(!0)},variant:"primary"},"Log In")))))),k?function(){if(T)return r.a.createElement(m.c,{to:"/spaces"})}():"")},k=a(479),C=a(32),S=a(83),T=function(){var e=Object(n.useContext)(s).user,t=Object(n.useState)(null),a=Object(o.a)(t,2),c=(a[0],a[1]),l=Object(S.b)({from:{opacity:0,marginTop:"-150px"},opacity:1,color:"white",marginTop:"0px"}),i=Object(S.b)({from:{opacity:0,marginTop:"150px"},opacity:1,marginTop:"0px"});Object(n.useEffect)((function(){(function(){var t=Object(f.a)(d.a.mark((function t(){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=8;break}return t.next=3,fetch("/communitiesByUser/".concat(e.id));case 3:return a=t.sent,t.next=6,a.json();case 6:return n=t.sent,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()().then((function(e){c(e)}))}),[e]);return r.a.createElement("div",null,r.a.createElement(k.a,{style:{background:'linear-gradient( rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7) ), url("https://img.rawpixel.com/s3fs-private/rawpixel_images/website_content/v211batch11-aum-561-cummunity_2.jpg?w=1200&dpr=1&fit=default&crop=default&q=65&vib=3&con=3&usm=15&bg=F4F4F3&ixlib=js-2.2.1&s=f0977b16acfb162ea9b439acec79e19e")',backgroundPosition:"center 35%",backgroundSize:"cover",height:"350px",borderRadius:"0px"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("div",{style:{textAlign:"center",border:"7px solid white",padding:"15px"}},r.a.createElement(S.a.div,{style:l},r.a.createElement("h1",null,"Welcome to Safespace")),r.a.createElement("p",{style:{color:"white"}},r.a.createElement("span",{className:"text-wrapper"},"This is a safe space for anyone to create a community around their personal experiences, whatever that may be.")))),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},!e&&r.a.createElement(C.LinkContainer,{to:"/register",style:{marginTop:"18px"}},r.a.createElement(v.a,{className:"marvel-btn"},"Create An Account")))),r.a.createElement(S.a.div,{style:i},r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(E.a,{style:{border:"0px",width:"75%"},className:"text-center"},r.a.createElement(E.a.Body,null,r.a.createElement(E.a.Title,null,"Create Your Own Community"),r.a.createElement(E.a.Text,null,"Create a space for yourself and others to gather around a shared experiences and provide support and motivation for one another."),r.a.createElement(C.LinkContainer,{to:"/create-community"},r.a.createElement(v.a,{variant:"primary"},"Create a Community")))))),r.a.createElement(S.a.div,{style:i},r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(E.a,{style:{border:"0px",width:"75%"},className:"text-center"},r.a.createElement(E.a.Body,null,r.a.createElement(E.a.Title,null,"Find Mentorship"),r.a.createElement(E.a.Text,null,"Communicate with others and learn better ways to to cope from people who have dealt with and have overcamed the same experiences as you."),r.a.createElement(C.LinkContainer,{to:"/chat"},r.a.createElement(v.a,{variant:"primary"},"Find a Mentor")))))),r.a.createElement(S.a.div,{style:i},r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(E.a,{style:{border:"0px",width:"75%"},className:"text-center"},r.a.createElement(E.a.Body,null,r.a.createElement(E.a.Title,null,"Tell Your Story"),r.a.createElement(E.a.Text,null,"Have a space to tell your story and to be heard."),r.a.createElement(C.LinkContainer,{to:"/spaces"},r.a.createElement(v.a,{variant:"primary"},"Browse Communites")))))))},A=a(499),L=a(280),N=a(490),I=function(){var e=Object(n.useContext)(s),t=e.user,a=e.setUser,c=Object(n.useState)(null),l=Object(o.a)(c,2),i=l[0],u=l[1],p=Object(n.useState)(!1),E=Object(o.a)(p,2),b=E[0],h=E[1];return Object(n.useEffect)((function(){(function(){var e=Object(f.a)(d.a.mark((function e(){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return e.next=3,fetch("/communitiesByUser/".concat(t.id));case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){u(e)}))}),[t,u]),Object(n.useEffect)((function(){b&&fetch("/logout").then((function(){return a(null)})).then((function(){return h(!0)}))}),[b]),r.a.createElement(A.a,{sticky:"top",style:{backgroundColor:x},expand:"lg"},r.a.createElement(C.LinkContainer,{style:{color:"white"},to:"/"},r.a.createElement(A.a.Brand,{style:{backgroundColor:"white",fontFamily:"arial",fontWeight:"700",fontStyle:"normal"}},r.a.createElement("i",{className:"fas fa-feather-alt"})," SAFESPACE")),r.a.createElement(A.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(A.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(L.a,{className:"mr-auto"}),r.a.createElement(L.a,null,t&&null!=i?r.a.createElement(r.a.Fragment,null,r.a.createElement(C.LinkContainer,{style:{color:"white"},to:"/account"},r.a.createElement(L.a.Link,null,"My Account")),r.a.createElement(N.a,{title:"Newsfeeds",style:{color:"white"},id:"basic-nav-dropdown"},i.map((function(e){return r.a.createElement(N.a.Item,{style:{color:"white"},key:e.name},r.a.createElement(C.LinkContainer,{to:"/news/member/".concat(e.id)},r.a.createElement(L.a.Link,null,e.name)))}))),r.a.createElement(C.LinkContainer,{style:{color:"white"},to:"/spaces"},r.a.createElement(L.a.Link,null,"Spaces")),r.a.createElement(C.LinkContainer,{style:{color:"white"},to:"/chat"},r.a.createElement(L.a.Link,null,"Chat")),r.a.createElement(L.a.Link,{onClick:function(){return h(!0)}},"Logout"),b&&r.a.createElement(m.c,{to:"/"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(C.LinkContainer,{style:{color:"white"},to:"/register"},r.a.createElement(L.a.Link,null,"Sign Up")),r.a.createElement(C.LinkContainer,{style:{color:"white"},to:"/login"},r.a.createElement(L.a.Link,null,"Login"))))))},P=a(480),B=a(498),F=function(e){var t=e.seed,a=e.setSeed,n=e.sprite,c=e.setSprite;return r.a.createElement("div",{style:{marginBottom:"22px"}},r.a.createElement(P.a,{style:{width:"9rem"},src:"https://avatars.dicebear.com/api/".concat(n,"/").concat(t,".svg"),rounded:!0}),r.a.createElement(v.a,{onClick:function(){return a(function(){for(var e="abcdefghijklmnopqrstuvwxyz123456789",t=e.length-1,a="",n=0;n<t;n+=1)a+=e[Math.ceil(Math.random()*(t-0)+0)];return a}())}},"Generate Avatar"),r.a.createElement(B.a,{style:{width:"100%",color:x},label:"Choose an Avatar Type",options:[{label:"Feminine",value:"female"},{label:"Masculine",value:"male"},{label:"Random Human",value:"human"},{label:"Robot",value:"bottts"},{label:"Jdenticon",value:"jdenticon"}],onChange:function(e){return c(e.value)}}))};var M=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),s=Object(o.a)(l,2),i=s[0],u=s[1],p=Object(n.useState)(""),v=Object(o.a)(p,2),x=v[0],w=v[1],k=Object(n.useState)(!1),C=Object(o.a)(k,2),S=C[0],T=C[1],A=Object(n.useState)(null),L=Object(o.a)(A,2),N=L[0],I=L[1],P=Object(n.useState)(null),B=Object(o.a)(P,2),M=B[0],D=B[1],J=Object(n.useState)("female"),G=Object(o.a)(J,2),U=G[0],H=G[1],_=Object(n.useState)("safespace"),R=Object(o.a)(_,2),W=R[0],z=R[1];function K(){return(K=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({seed:W,sprite:U,username:a,email:i,password:x})});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){I(e),window.setTimeout((function(){I(null)}),5e3)}return Object(n.useEffect)((function(){S&&D(r.a.createElement(m.c,{to:"/login"}))}),[S]),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:"10px"}},r.a.createElement(E.a,{style:{width:"25rem",border:"0px"}},r.a.createElement(E.a.Body,null,r.a.createElement(E.a.Title,{style:{textAlign:"center"}},r.a.createElement("h1",null,"S A F E S P A C E")),r.a.createElement(E.a.Title,{style:{textAlign:"center",color:O}},"Create an account"),r.a.createElement(E.a.Subtitle,{style:{textAlign:"center",color:g},className:"mb-2 "},"Feel free to use an alias"),r.a.createElement(b.a,{style:{marginTop:"25px"},className:"justify-content-md-center",fluid:"lg"},N&&r.a.createElement(y.a,{variant:"warning"},N),r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),function(e,t,a){return/\W/i.test(e)?(Y("Oops, that username seems wrong. Try removing those special characters!"),!1):e.length>30?(Y("Oops, that username seems too long. Try making it shorter!"),!1):e.length<6?(Y("Oops, that username seems too short. Try making it longer!"),!1):!1===/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t.toLowerCase())?(Y("Oops, that email seems wrong. Try typing it again!"),!1):!(a.length<8)||(Y("Oops, that password seems wrong. Try making it longer!"),!1)}(a,i,x))return function(){K.apply(this,arguments)}(),T(!0)},className:"registerForm"},r.a.createElement(F,{sprite:U,seed:W,setSprite:H,setSeed:z}),r.a.createElement("div",null,r.a.createElement(h.a.Group,null,r.a.createElement(j.a,{style:{width:"100%"},type:"text",label:"Username",helper:"Username must be longer than 6 characters",value:a,onChange:function(e){return c(e.target.value)},onClean:function(e){return c(e)}}))),r.a.createElement("div",null,r.a.createElement(h.a.Group,{controlId:"formBasicEmail"},r.a.createElement(j.a,{style:{width:"100%"},type:"email",label:"Email",helper:"Enter an email address",value:i,onChange:function(e){return u(e.target.value)},onClean:function(e){return u(e)}}))),r.a.createElement("div",null,r.a.createElement(h.a.Group,{controlId:"formBasicPassword"},r.a.createElement(j.a,{style:{width:"100%"},type:"password",label:"Password",helper:"Enter password longer than 8 characters",value:x,onChange:function(e){return w(e.target.value)},onClean:function(e){return w(e)}}))),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Create Account"))),S&&r.a.createElement("div",null,M)))))},D=a(481),J=function(){var e=Object(n.useContext)(s).user,t=Object(n.useState)(null),a=Object(o.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){(function(){var t=Object(f.a)(d.a.mark((function t(){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=8;break}return t.next=3,fetch("/communitiesByUser/".concat(e.id));case 3:return a=t.sent,t.next=6,a.json();case 6:return n=t.sent,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()().then((function(e){l(e)}))}),[e]),r.a.createElement("div",null,null!=c&&null!=e?c.map((function(e,t){return r.a.createElement(u.Link,{key:t,to:"/news/".concat(e.id)},r.a.createElement("h1",null,e.name))})):r.a.createElement("div",null,r.a.createElement(D.a,{style:{display:"flex",alignItems:"center"},indeterminate:!0,active:!0},"Loading Feed...")))},G=a(493),U=a(501),H=a(495),_=a(489),R=a(492),W=a(504),z=function(e){var t=e.data;console.log(t);var a=Object(n.useState)(),c=Object(o.a)(a,2),l=c[0],s=c[1];return Object(n.useEffect)((function(){(function(){var e=Object(f.a)(d.a.mark((function e(){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<t.length)){e.next=14;break}return e.next=4,fetch("/user/".concat(t[a].user_id));case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,t[a].username=r.username,t[a].sprite=r.sprite,t[a].seed=r.seed;case 11:a++,e.next=1;break;case 14:s(!0);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()})),console.log(t),r.a.createElement(R.a.Group,null,r.a.createElement(W.a,{as:"h3",dividing:!0},"Comments"),l&&t.map((function(e){return console.log(e),r.a.createElement(R.a,null,r.a.createElement(R.a.Avatar,{src:"https://avatars.dicebear.com/api/".concat(e.sprite,"/").concat(e.seed,".svg")}),r.a.createElement(R.a.Content,null,r.a.createElement(R.a.Author,{as:"a"},e.username),r.a.createElement(R.a.Metadata,null,r.a.createElement("div",null,e.created_at)),r.a.createElement(R.a.Text,null,e.content)))})))},K=a(150),Y=a.n(K),q=a(503);var V=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(""),i=Object(o.a)(s,2),u=i[0],m=i[1],p=Object(n.useState)(null),E=Object(o.a)(p,2),b=E[0],g=E[1],x=Object(n.useState)(!1),O=Object(o.a)(x,2),w=O[0],k=O[1],C=e.id,S=e.postId;function T(){return(T=Object(f.a)(d.a.mark((function t(a){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=w?{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:c,body:u,postId:S})}:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:c,body:u,communityId:C})},t.next=4,fetch("/posts",n);case 4:if(401!==(r=t.sent).status){t.next=7;break}return t.abrupt("return",A("Connection Error. Please try again later!"));case 7:if(500!==r.status){t.next=9;break}return t.abrupt("return",A("Our computers are feeling down, please try again in a few moments."));case 9:201===r.status&&e.setShow(!1);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(e){g(e),window.setTimeout((function(){g(null)}),5e3)}return Object(n.useEffect)((function(){k(e.update),w&&(l(e.title),m(e.body))}),[w]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Submit a post"),b&&r.a.createElement(y.a,{variant:"warning"},b),r.a.createElement(h.a,null,r.a.createElement(j.a,{label:"Title",helper:"Give your post a title",maxLength:144,value:c,onChange:function(e){var t=e.target.value;144!==c.length&&l(t)},onClean:function(){return l("")}}),r.a.createElement("br",null),r.a.createElement(q.a,{label:"Post Body",helper:"Share your thoughts! Remember to be considerate of yourself and others",value:u,onChange:function(e){var t=e.target.value;m(t)}}),r.a.createElement("br",null),r.a.createElement(v.a,{onClick:function(e){return T.apply(this,arguments)}},"Submit")))},$=a(68);var Q=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],l=a[1];return Object(n.createRef)(),r.a.createElement("div",null,r.a.createElement(H.a.Item,{text:"Edit",onClick:function(){l(!0)}}),r.a.createElement($.a,{show:c,onHide:function(){return l(!1)},animation:!1},r.a.createElement($.a.Header,{closeButton:!0},"New Post"),r.a.createElement($.a.Body,null,r.a.createElement(V,{setShow:l,setNewPost:e.setNewPost,postId:e.id,update:!0,title:e.title,body:e.body}))))};var X=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=(a[0],a[1]),l=Object(n.useContext)(s).user,i=Object(n.useState)([]),u=Object(o.a)(i,2),m=u[0],p=u[1],b=Object(n.useState)(null),h=Object(o.a)(b,2),y=h[0],v=h[1],j=Object(n.useState)(!1),g=Object(o.a)(j,2),x=g[0],O=g[1],w=Object(n.useState)(!1),k=Object(o.a)(w,2),S=k[0],T=k[1],A=new Date(e.data.created_at),N=Object(n.useState)(),I=Object(o.a)(N,2),P=I[0],B=I[1],F=Object(n.useState)(!1),M=Object(o.a)(F,2);M[0],M[1],Object(n.useEffect)((function(){(function(){var t=Object(f.a)(d.a.mark((function t(){var a,n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/likes/".concat(e.data.id));case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,p(n),r=0;case 8:if(!(r<m.length)){t.next=14;break}if(m[r].user_id!==l.id){t.next=11;break}return t.abrupt("return",T(!0));case 11:r++,t.next=8;break;case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[S]);var D=Object(n.useState)(null),J=Object(o.a)(D,2),R=J[0],W=J[1],K=function(){var t=Object(f.a)(d.a.mark((function t(){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/user/".concat(e.data.user_id));case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,W(n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){K()}),[]);var q=function(){var t=Object(f.a)(d.a.mark((function t(){var a,n,r,c,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a={method:"POST",headers:{"Content-Type":"application/json"}},!0!==S){t.next=12;break}return t.next=4,fetch("/unlike/".concat(e.data.id,"/").concat(l.id),a);case 4:return n=t.sent,t.next=7,n.json();case 7:r=t.sent,p(r),T(!1),t.next=20;break;case 12:return t.next=14,fetch("/like/".concat(e.data.id,"/").concat(l.id),a);case 14:return c=t.sent,t.next=17,c.json();case 17:o=t.sent,p(o),T(!0);case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),V=function(){var t=Object(f.a)(d.a.mark((function t(){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!x){t.next=4;break}O(!1),t.next=12;break;case 4:return t.next=6,fetch("/comments/".concat(e.data.id));case 6:return a=t.sent,t.next=9,a.json();case 9:n=t.sent,v(n),O(!0);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),$=function(){var t=Object(f.a)(d.a.mark((function t(){var a,n,r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("hello"),a=e.data.id,n=P,r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:a,content:n})},t.next=6,fetch("/comments",r);case 6:return c=t.sent,t.next=9,c;case 9:t.sent;case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(G.a,{style:{width:"80%",marginLeft:"10%",marginTop:"30px",border:"2px solid black",padding:"15px",boxShadow:"2px 5px #888888"}},r.a.createElement(G.a.Image,{src:"https://react.semantic-ui.com/images/wireframe/image.png"}),r.a.createElement(G.a.Content,null,r.a.createElement(G.a.Header,{as:"a"},e.data.title),R?r.a.createElement(C.LinkContainer,{to:"/user/".concat(R.id)},r.a.createElement(L.a.Link,null,R.username)):"",e.data.user_id===l.id&&r.a.createElement(U.a,{floated:"right"},r.a.createElement(H.a,{floated:"right",icon:"edit"},r.a.createElement(H.a.Menu,null,r.a.createElement(H.a.Item,{text:"Delete",onClick:function(){return t=e.data.id,void fetch("/posts/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"}});var t}}),r.a.createElement(H.a.Item,{text:"Edit"},r.a.createElement(Q,{setNewPost:c,id:e.data.id,title:e.data.title,body:e.data.content}))))),r.a.createElement(G.a.Meta,null,["January","February","March","April","May","June","July","August","September","October","November","December"][A.getMonth()]," ",A.getDate(),","," ",A.getFullYear()," ",A.getHours(),":",A.getMinutes()," ",A.getHours()>=12?"PM":"AM"),r.a.createElement(G.a.Description,null,r.a.createElement(Y.a,{text:e.data.content,min:200,max:500,ideal:300,readMoreText:"...See More"})),r.a.createElement(G.a.Extra,null,r.a.createElement(E.a.Link,null,m.length),r.a.createElement(E.a.Link,{onClick:function(){return q()}},S?"Un-Like":"Like"),r.a.createElement(E.a.Link,{onClick:function(){return V()}},"Comments")),x&&r.a.createElement(z,{data:y}),r.a.createElement(_.a,null,r.a.createElement(_.a.TextArea,{width:12,onChange:function(e){var t=e.target.value;B(t)}}),r.a.createElement(_.a.Button,{content:"Add Reply",labelPosition:"right",icon:"edit",primary:!0,onClick:function(){return $()}}))))};var Z=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],l=a[1];return Object(n.createRef)(),r.a.createElement("div",null,r.a.createElement(A.a,{fixed:"bottom"},r.a.createElement(U.a,{label:"Write Post",labelPosition:"left",size:"massive",color:"black",style:{backgroundColor:x},circular:!0,icon:"edit",onClick:function(){return l(!0)}}),r.a.createElement($.a,{show:c,onHide:function(){return l(!1)},animation:!1},r.a.createElement($.a.Header,{closeButton:!0},"New Post"),r.a.createElement($.a.Body,null,r.a.createElement(V,{setShow:l,setNewPost:e.setNewPost,id:e.id})))))};var ee=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),s=Object(o.a)(l,2),i=(s[0],s[1]),u=Object(m.m)().id;return Object(n.useEffect)((function(){(function(){var e=Object(f.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/posts-community/".concat(u));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,c(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[u]),null===a?r.a.createElement("div",null,r.a.createElement(D.a,{style:{display:"flex",alignItems:"center"},indeterminate:!0,active:!0},"Loading Feed...")):r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,{setNewPost:i}),r.a.createElement(G.a.Group,null,a.map((function(e,t){return r.a.createElement(X,{key:e.title+t,data:e})}))))},te=a(484);var ae=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(),i=Object(o.a)(l,2),u=i[0],p=i[1],b=Object(n.useState)(!1),h=Object(o.a)(b,2),y=h[0],j=h[1],g=Object(n.useState)(!1),x=Object(o.a)(g,2),O=x[0],w=x[1],k=Object(n.useContext)(s).user;Object(n.useEffect)((function(){fetch("/communities").then((function(e){return 200===e.status?e.json():[]})).then((function(e){return S(k.id,e)})).then((function(e){return c(e)}))}),[c]);var S=function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n,r,c,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/communitiesByUser/".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:for(r=e.sent,c=0;c<r.length;c++)for(l=0;l<a.length;l++)r[c].id===a[l].id&&a.splice(l,1);return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function T(){return(T=Object(f.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(a),n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,communityId:a})},e.next=4,fetch("/join",n);case 4:if(500===(r=e.sent).status&&console.log("Our computers are feeling down, please try again in a few moments."),200!==r.status){e.next=8;break}return e.abrupt("return",j(!0));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(t),e.abrupt("return",w(!0));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return 0===a.length?r.a.createElement(te.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):r.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:"25px"}},O&&r.a.createElement(m.c,{to:"/news/visiter/".concat(u)}),y&&r.a.createElement(m.c,{to:"/news/member/".concat(u)}),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h1",{style:{marginBottom:"20px"}},"Safe Spaces To Join!"),r.a.createElement(C.LinkContainer,{style:{marginBottom:"20px"},to:"create-community"},r.a.createElement(v.a,null,"Create a Community")),r.a.createElement("div",{style:{marginLeft:"20vw",marginRight:"20vw"}},a.map((function(e,t){return r.a.createElement(E.a,{style:{marginBottom:"35px"},key:t},r.a.createElement(E.a.Body,null,r.a.createElement(E.a.Title,null,e.display_name),r.a.createElement(E.a.Text,null,e.headline)),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",marginBottom:"8px"}},r.a.createElement(v.a,{style:{width:"22%"},onClick:function(){return function(e,t){return T.apply(this,arguments)}(k.id,e.id)}},"Join"),r.a.createElement(v.a,{style:{width:"22%"},onClick:function(){return function(e){return A.apply(this,arguments)}(e.id)},variant:"secondary"},"Visit")))})))))},ne=a(497),re=a(278),ce=a(156),le=a(104),oe=function(e){var t=e.data,a=Object(m.l)(),c=t.title,l=new Date(t.created_at),i=t.id,u=t.user_id,p=(t.community_id,Object(n.useContext)(s).user),E=Object(n.useState)(!1),b=Object(o.a)(E,2),h=(b[0],b[1]),y=Object(n.useState)([]),v=Object(o.a)(y,2),j=v[0],g=v[1],x=Object(n.useState)(null),O=Object(o.a)(x,2),w=O[0],k=O[1],S=Object(n.useState)(!1),T=Object(o.a)(S,2),A=T[0],N=T[1],I=Object(n.useState)(!1),P=Object(o.a)(I,2),B=P[0],F=P[1],M=Object(n.useState)(!1),D=Object(o.a)(M,2),J=D[0],G=D[1],W=Object(n.useState)(!1),K=Object(o.a)(W,2);K[0],K[1];Object(n.useEffect)((function(){(function(){var e=Object(f.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/likes/".concat(i));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,g(a),n=0;case 8:if(!(n<j.length)){e.next=14;break}if(j[n].user_id!==u){e.next=11;break}return e.abrupt("return",F(!0));case 11:n++,e.next=8;break;case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[B]);var q=Object(n.useState)(null),V=Object(o.a)(q,2),$=V[0],X=V[1];Object(n.useEffect)((function(){(function(){var e=Object(f.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/user/".concat(u));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,X(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var Z=function(){var e=Object(f.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!A){e.next=4;break}N(!1),e.next=12;break;case 4:return e.next=6,fetch("/comments/".concat(i));case 6:return t=e.sent,e.next=9,t.json();case 9:a=e.sent,k(a),N(!0);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(f.a)(d.a.mark((function e(){var t,a,n,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={method:"POST"},!B){e.next=12;break}return e.next=4,fetch("/unlike/".concat(i,"/").concat(u),t);case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,g(n),F(!1),e.next=20;break;case 12:return e.next=14,fetch("/like/".concat(i,"/").concat(u),t);case 14:return r=e.sent,e.next=17,r.json();case 17:c=e.sent,g(c),F(!0);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/posts/".concat(t),{method:"DELETE"}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=Object(n.useState)(""),oe=Object(o.a)(ae,2),se=oe[0],ie=oe[1],ue=function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:i,content:se})},e.next=3,fetch("/comments",t);case 3:G((function(e){return!e}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=$||{sprite:"jdenticon",seed:"2f",username:"User"},pe=me.sprite,de=me.seed,fe=(me.username,"https://avatars.dicebear.com/api/".concat(pe,"/").concat(de,".svg")),Ee=Object(n.useState)(null),be=Object(o.a)(Ee,2),he=be[0],ye=be[1],ve=function(){var e=Object(f.a)(d.a.mark((function e(){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/user/".concat(t.user_id));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,ye(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){ve()}),[]),r.a.createElement(ne.a,{fluid:!0},J&&r.a.createElement(m.c,{to:a.pathname}),r.a.createElement(ne.a.Content,null,t.user_id===(null===p||void 0===p?void 0:p.id)&&r.a.createElement(U.a,{floated:"right"},r.a.createElement(H.a,{floated:"right",icon:"edit"},r.a.createElement(H.a.Menu,null,r.a.createElement(H.a.Item,{text:"Delete",onClick:function(){return te(t.id)}}),r.a.createElement(H.a.Item,{text:"Edit"},r.a.createElement(Q,{setNewPost:h,id:t.id,title:t.title,body:t.content}))))),r.a.createElement(re.a,{floated:"right",size:"mini",src:fe}),r.a.createElement(ne.a.Header,null,c),r.a.createElement(ne.a.Meta,null,he?r.a.createElement(C.LinkContainer,{to:"/user/".concat(he.id)},r.a.createElement(L.a.Link,null,"By ",he.username)):""),r.a.createElement(ne.a.Meta,null,l.toLocaleString()),r.a.createElement(ne.a.Description,null,r.a.createElement(Y.a,{text:t.content,min:200,max:500,ideal:350,readMoreText:"Read More"}))),r.a.createElement(ne.a.Content,{extra:!0,style:{display:"flex",justifyContents:"space-between"}},r.a.createElement(ne.a.Description,{style:{marginRight:"4px"}},r.a.createElement(U.a,{as:"div",labelPosition:"left"},r.a.createElement(ce.a,{as:"a",basic:!0,pointing:"right"},j.length),r.a.createElement(U.a,{style:B?{color:"#1FB6FF"}:{color:"white"},onClick:function(){return ee()},color:"black",icon:!0},r.a.createElement(le.a,{name:"heart"}),B?"Liked":"Like"))),r.a.createElement(ne.a.Description,null),r.a.createElement(ne.a.Description,{onClick:function(){return Z()}},r.a.createElement(U.a,{color:"black",animated:!0},r.a.createElement(U.a.Content,{style:{color:"white"},visible:!0},"Comments"),r.a.createElement(U.a.Content,{hidden:!0},r.a.createElement(le.a,{name:"arrow right"}))))),r.a.createElement(ne.a.Content,{extra:!0},r.a.createElement(R.a.Group,null,A&&r.a.createElement(z,{data:w}),r.a.createElement(_.a,{reply:!0},r.a.createElement(_.a.TextArea,{width:12,onChange:function(e){var t=e.target.value;ie(t)}}),r.a.createElement(U.a,{onClick:function(){return ue()},content:"Add Reply",labelPosition:"left",icon:"edit",secondary:!0})))))};var se=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useContext)(s).user,i=Object(n.useState)(null),u=Object(o.a)(i,2),m=(u[0],u[1]),p=function(){var e=Object(f.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/user/".concat(l.id));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,m(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){p()}),[]),Object(n.useEffect)((function(){(function(){var e=Object(f.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/posts-user/".concat(l.id));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",c(a));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[l]),r.a.createElement(r.a.Fragment,null,l?r.a.createElement("div",null,r.a.createElement(k.a,null,r.a.createElement("h1",null,l.username)),r.a.createElement("div",{style:{width:"65%",margin:"0 auto"}},r.a.createElement(ne.a.Group,null,a.map((function(e,t){return r.a.createElement(oe,{key:e.title+t,data:e})}))))):r.a.createElement("div",null,r.a.createElement(D.a,{style:{display:"flex",alignItems:"center"},indeterminate:!0,active:!0},"Loading Feed...")))};var ie=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=(t[0],t[1]),c=Object(m.m)().id;return Object(n.useEffect)((function(){(function(){var e=Object(f.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/posts/".concat(c));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",a(n));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c]),r.a.createElement(G.a,{style:{width:"80%",marginLeft:"10%",marginTop:"30px",border:"2px solid black",padding:"15px",boxShadow:"2px 5px #888888"}},r.a.createElement(G.a.Image,{src:"https://react.semantic-ui.com/images/wireframe/image.png"}),r.a.createElement(G.a.Content,null,r.a.createElement(G.a.Header,{as:"a"},"Title will go here"),r.a.createElement(G.a.Description,null,"Description"),r.a.createElement(G.a.Extra,null,r.a.createElement("button",{type:"button",class:"btn btn-primary",onClick:function(){fetch("/posts/".concat(c),{method:"DELETE",headers:{"Content-Type":"application/json"}})}},"Delete"))))};var ue=function(){var e=Object(m.m)().id,t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)([]),i=Object(o.a)(s,2),u=i[0],p=i[1],E=function(){var t=Object(f.a)(d.a.mark((function t(){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/user/".concat(e));case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,l(n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),b=function(){var t=Object(f.a)(d.a.mark((function t(){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/posts-user/".concat(e));case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,p(n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){E(),b()}),[]),r.a.createElement("div",null,r.a.createElement(k.a,null,r.a.createElement("h1",null,c.username)),r.a.createElement("div",{style:{width:"65%",margin:"0 auto"}},r.a.createElement(G.a.Group,null,u.map((function(e,t){return r.a.createElement(oe,{key:t,data:e})})))))},me=a(488),pe=a(505),de=a(485),fe=a(491),Ee=a(500),be=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)({}),s=Object(o.a)(l,2),i=s[0],u=s[1],p=Object(n.useState)([]),E=Object(o.a)(p,2),b=E[0],h=E[1],y=Object(n.useState)(!1),v=Object(o.a)(y,2),j=(v[0],v[1]),g=Object(m.m)(),x=g.type,O=g.id;return Object(n.useEffect)((function(){var e=function(){var e=Object(f.a)(d.a.mark((function e(){var t,a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("member"!==x){e.next=11;break}return e.next=3,fetch("/posts-community/".concat(O));case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,console.log(a,"member"),c(a),e.next=19;break;case 11:return e.next=13,fetch("/posts-community/visiter/".concat(O));case 13:return n=e.sent,e.next=16,n.json();case 16:r=e.sent,console.log(r,"visiter"),c(r);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(f.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/moderators/".concat(O));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,h(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(f.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/communities/".concat(O));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,u(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t(),a(),e()}),[O]),r.a.createElement("div",null,r.a.createElement(k.a,null,r.a.createElement(fe.a.Event,null,r.a.createElement(fe.a.Label,{style:{width:"50px"},image:"https://avatars.dicebear.com/api/".concat(i.sprite,"/").concat(i.seed,".svg")})),r.a.createElement("h1",null,i.display_name),r.a.createElement("p",null,i.headline)),r.a.createElement(pe.a,{defaultActiveKey:"newsfeed",transition:!1,id:"noanim-tab-example"},r.a.createElement(de.a,{eventKey:"newsfeed",title:"Newsfeed"},r.a.createElement("br",null),r.a.createElement("div",{style:{width:"65%",margin:"0 auto"}},r.a.createElement(ne.a.Group,null,r.a.createElement(Z,{setNewPost:j,id:O}),Array.isArray(a)&&a.map((function(e,t){return r.a.createElement(oe,{key:t,data:e})}))))),r.a.createElement(de.a,{eventKey:"about",title:"About"},r.a.createElement(Ee.a,{style:{marginTop:"20px"}},r.a.createElement(Ee.a.Header,null,"About Us"),r.a.createElement("p",null,i.description))),r.a.createElement(de.a,{eventKey:"admins",title:"Admins"},r.a.createElement(Ee.a,{style:{marginTop:"20px"}},r.a.createElement(Ee.a.Header,null,"Adminstrators of this group:"),r.a.createElement(Ee.a.List,null,b.map((function(e,t){return r.a.createElement(Ee.a.Item,{key:t},r.a.createElement(fe.a.Event,null,r.a.createElement(fe.a.Label,{style:{width:"50px"},image:"https://avatars.dicebear.com/api/".concat(e.sprite,"/").concat(e.seed,".svg")}),r.a.createElement(fe.a.Content,null,r.a.createElement(fe.a.Summary,{content:e.username}))))})))))))},he=a(82),ye=a(279),ve=a(486),je=a(482),ge=a(494),xe=a(483),Oe=a(502),we=a(487),ke=function(e){return r.a.createElement(R.a,null,r.a.createElement(R.a.Avatar,{as:"a",src:"https://avatars.dicebear.com/api/".concat(e.sprite,"/").concat(e.seed,".svg")}),r.a.createElement(R.a.Content,null,r.a.createElement(R.a.Author,null,e.author),r.a.createElement(R.a.Metadata,null,r.a.createElement("div",null,e.sentAt),e.isPrivate&&r.a.createElement("div",{style:{color:"red"}},"".concat(e.author," private messaged you"))),r.a.createElement(R.a.Text,null,r.a.createElement("p",null,e.message))))},Ce=a(276),Se=a.n(Ce),Te=function(){var e=Object(n.useContext)(s).user,t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(),u=Object(o.a)(i,2),m=u[0],p=u[1],d=Object(n.useState)([]),f=Object(o.a)(d,2),E=f[0],b=f[1],h=Object(n.useState)({}),y=Object(o.a)(h,2),v=y[0],j=y[1],x=Object(n.useState)([]),w=Object(o.a)(x,2),k=w[0],C=w[1],S=Object(n.useState)(!1),T=Object(o.a)(S,2),L=(T[0],T[1],Object(n.useState)(!1)),N=Object(o.a)(L,2),I=N[0],P=N[1],B=Object(n.useState)(0),F=Object(o.a)(B,2),M=F[0],D=F[1],J=Object(n.useRef)(),G=function(){var e=new Date,t=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],a=e.getDate(),n=e.getFullYear(),r="".concat(e.getHours(),":").concat(e.getMinutes()),c=e.getHours()>=12?"PM":"AM";return"".concat(t," ").concat(a,", ").concat(n," - ").concat(r," ").concat(c)};Object(n.useEffect)((function(){J.current=Se.a.connect("/"),J.current.on("your id",(function(e){return p(e)})),J.current.on("message",(function(e){return function(e){b((function(t){return[].concat(Object(he.a)(t),[e])})),D((function(e){return e+1}))}(e)})),J.current.on("update",(function(e){return C(e)}))}),[]),Object(n.useEffect)((function(){if(document.getElementById("chatBox")){var e=document.getElementById("chatBox");e.scrollTop=e.scrollHeight}}));var H=[{menuItem:{key:"users",icon:"users",content:"Online Users"},render:function(){return k.map((function(e,t){if(e.socketId!==m)return r.a.createElement(R.a,{style:{marginLeft:"25px",marginTop:"20px"},key:t,onClick:function(){j(e)}},r.a.createElement(R.a.Avatar,{style:{width:"50px",height:"55px"},src:"https://avatars.dicebear.com/api/".concat(e.sprite,"/").concat(e.seed,".svg")}),r.a.createElement(R.a.Content,null,r.a.createElement(R.a.Author,{as:"a"},e.username)))}))}},{menuItem:r.a.createElement(ye.a.Item,{onClick:function(){return D(0)},key:"messages"},"Messages",r.a.createElement(ce.a,null,M)),render:function(){return r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(R.a.Group,{size:"large",id:"chatBox",style:{marginTop:"25px",overflow:"auto",height:"400px",border:"3px solid #a7abaf",width:"100%",padding:"25px"}},E.map((function(e,t){return e.socketId===m?r.a.createElement(ke,{key:t,isPrivate:!0,message:e.body,author:e.username,sentAt:e.sentAt,sprite:e.sprite,seed:e.seed,yourId:m,contact:v}):r.a.createElement(ke,{key:t,isPrivate:!1,message:e.body,author:e.username,sentAt:e.sentAt,sprite:e.sprite,seed:e.seed,yourId:m,contact:v})}))))}}];return r.a.createElement("div",null,r.a.createElement(A.a,{expand:"lg"},r.a.createElement(ve.a,null,r.a.createElement(W.a,{as:"h1",style:{color:g}},r.a.createElement(le.a,{name:"fa-inbox",style:{color:O}}),r.a.createElement(W.a.Content,null,"Safespace Chat")))),r.a.createElement(A.a,{expand:"lg"},r.a.createElement(ve.a,null,r.a.createElement(Oe.a,{key:"overlay",placement:"right",overlay:r.a.createElement(we.a,{id:"tooltip-right"},"Anyone can private message you when online.")},r.a.createElement(je.a,{toggle:!0,onChange:function(){I?(J.current.emit("go offline"),P(!1)):function(t){var a={socketId:t,userId:e.id,username:e.username,seed:e.seed,sprite:e.sprite};J.current.emit("online",a),P(!0)}(m)},label:I?"Online":"Offline"}))," ",r.a.createElement("div",null,v.socketId&&r.a.createElement(U.a,{onClick:function(){j({})},content:"Leave private"}),v.socketId&&r.a.createElement(R.a,{style:{marginLeft:"25px",marginTop:"10px"},key:"contact"},r.a.createElement(R.a.Avatar,{style:{width:"50px",height:"55px"},src:"https://avatars.dicebear.com/api/".concat(v.sprite,"/").concat(v.seed,".svg")}),r.a.createElement(R.a.Content,null,"Private Messaging:",r.a.createElement(R.a.Author,{as:"a"}," ".concat(v.username))))))),r.a.createElement(ge.a,{panes:H}),r.a.createElement(A.a,{fixed:"bottom",expand:"lg",style:{backgroundColor:O,display:"flex",justifyContent:"center"}},r.a.createElement(ve.a,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",width:"100%"}},r.a.createElement(xe.a,{value:c,onChange:function(e){l(e.target.value)},style:{width:"100%",height:"40px",fontSize:"22px"}}),r.a.createElement(U.a,{onClick:function(){!function(){var t={body:c,id:m,username:e.username,seed:e.seed,sprite:e.sprite,sentAt:G(),socketId:v.socketId};J.current.emit("send message",t)}(),l("")},content:"Send"})))))},Ae=a(59),Le=a(70),Ne=function(){Object(n.useContext)(s).user;var e=Object(n.useState)({communityName:"",displayName:"",headline:"",description:"",seed:"safespace",sprite:"jdenticon"}),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),i=Object(o.a)(l,2),u=i[0],p=i[1],g=Object(n.useState)(!1),x=Object(o.a)(g,2),O=x[0],w=x[1],k=function(e){var t=e.target,n=t.name,r=t.value,l=Object(Le.a)(Object(Le.a)({},a),{},Object(Ae.a)({},n,r));c(l)};var C=function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(n=S(a)).length){e.next=4;break}return e.abrupt("return",T(n));case 4:return r=Object(Le.a)({},a),e.next=7,fetch("/communities",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 7:return c=e.sent,e.next=10,c.json();case 10:e.sent,w(!0);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function S(e){var t=e.communityName,a=e.displayName,n=(e.headline,[]);return t||n.push("Choosing a name is mandatory!"),a||n.push("Please choose a name to represent your comunity"),/\W/gi.test(t)&&n.push("Community name must only contain letters, numbers, and underscores!"),a.length>32&&n.push("The display name is limited to 32 characters or less!"),n}function T(e){p(e),setTimeout((function(){p([])}),4e3)}var A=a.communityName,L=a.displayName,N=a.headline,I=a.description,P=a.sprite,B=a.seed;return r.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginTop:"10px"}},r.a.createElement(E.a,{style:{width:"25rem",border:"0px"}},r.a.createElement(E.a.Body,null,r.a.createElement(E.a.Title,{style:{textAlign:"center"}},r.a.createElement("h1",null,"Create a Community")),r.a.createElement(b.a,{style:{marginTop:"25px"},className:"justify-content-md-center",fluid:"lg"},r.a.createElement(h.a,{onSubmit:C},r.a.createElement(F,{seed:B,sprite:P,setSeed:function(e){var t=Object(Le.a)(Object(Le.a)({},a),{},{seed:e});c(t)},setSprite:function(e){var t=Object(Le.a)(Object(Le.a)({},a),{},{sprite:e});c(t)}}),r.a.createElement("div",null,r.a.createElement(h.a.Group,null,r.a.createElement(j.a,{name:"communityName",value:A,onChange:k,type:"text",label:"Community Name",helper:"This name is more like a 'username' and so must be unique"}))),r.a.createElement("div",null,r.a.createElement(h.a.Group,null,r.a.createElement(j.a,{name:"displayName",value:L,onChange:k,type:"text",label:"Display Name",helper:"This is the name others will see"}))),r.a.createElement("div",null,r.a.createElement(h.a.Group,null,r.a.createElement(j.a,{name:"headline",value:N,onChange:k,type:"text",label:"Headline",helper:"Briefly summarize your community to attract like-minded people"}))),r.a.createElement("div",null,r.a.createElement(h.a.Group,null,r.a.createElement(q.a,{name:"description",value:I,onChange:k,label:"Description",helper:"Tell everyone what this community is about!"}))),r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Description Suggestions"),r.a.createElement("ul",null,r.a.createElement("li",null,"What inspired you to create this community?"),r.a.createElement("li",null,"What should I be looking for if I want to join this community?"),r.a.createElement("li",null,"What rules and guideslines should users follow when posting here?"))),!!u.length&&u.map((function(e){return r.a.createElement(y.a,{variant:"warning",key:e},e)})),r.a.createElement(v.a,{type:"submit"},"Create Community")),O&&r.a.createElement(m.c,{to:"/"})))))},Ie=function(){return r.a.createElement(u.BrowserRouter,null,r.a.createElement(me.a,null,r.a.createElement(i,null,r.a.createElement("div",null,r.a.createElement(I,null),r.a.createElement(m.g,null,r.a.createElement(m.d,{path:"/register"},r.a.createElement(M,null)),r.a.createElement(m.d,{path:"/login"},r.a.createElement(w,null)),r.a.createElement(m.d,{path:"/news/:type/:id"},r.a.createElement(be,null)),r.a.createElement(m.d,{path:"/spaces"},r.a.createElement(ae,null)),r.a.createElement(m.d,{path:"/ex/:id"},r.a.createElement(ee,null)),r.a.createElement(m.d,{path:"/account"},r.a.createElement(se,null)),r.a.createElement(m.d,{path:"/view/:id"},r.a.createElement(ie,null)),r.a.createElement(m.d,{path:"/home"},r.a.createElement(J,null)),r.a.createElement(m.d,{path:"/testCom/:id"},r.a.createElement(be,null)),r.a.createElement(m.d,{path:"/user/:id"},r.a.createElement(ue,null)),r.a.createElement(m.d,{path:"/chat"},r.a.createElement(Te,null)),r.a.createElement(m.d,{path:"/create-community"},r.a.createElement(Ne,null)),r.a.createElement(m.d,{path:"/"},r.a.createElement(T,null)))))))},Pe=document.getElementById("root");l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ie,null)),Pe)}},[[291,1,2]]]);
//# sourceMappingURL=main.4edb9f17.chunk.js.map